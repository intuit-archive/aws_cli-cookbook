require 'spec_helper'

describe ChangeBatch do

	before :each do 
		@change_batch = ChangeBatch.new(	hostname: "mylocalhost.amazon.com", 
											record: "myrecord", 
											domain: "mydomain",
                                            record_type: "cname",
                                            TTL: 60,
                                            change_type: "UPSERT"
										)
	end

	describe "#new" do
		it "returns a new ChangeBatch object" do
			@change_batch.should be_an_instance_of ChangeBatch
		end

		it "returns changebatch json" do

			batch = @change_batch.create 
            parsed = JSON.parse(batch)
            puts parsed
            parsed[:Changes[:ResourceRecordSet[:Value]]].should == "mylocalhost.amazon.com"

		end

	end

end

